#
# ident	"@(#)Makefile	1.8	99/03/30 SMI"
#
# Copyright (c) 1999 by Sun Microsystems, Inc.
# All rights reserved.
#
# Makefile for Java Print Manager client
#
include		$(SRC)/Makefile.master

CLASSPATH=	$(SRC)/cmd/print/printmgr

CLASSFILES = 	Constants.class \
		pmAuthOptions.class \
		pmHelpFrame.class \
		pmTop.class \
		pmResources.class \
		pmUtility.class \
		pmCalls.class \
		pmLoad.class \
		pmDelete.class \
		pmAccess.class \
		pmButtonScreen.class \
		pmInstallScreen.class \
		pmInstallPrinter.class \
		pmOKCancelDialog.class \
		pmMessageDialog.class \
		pmLogin.class \
		pmLogDisplay.class \
		pmHelpDetailPanel.class \
		pmHelpContent.class \
		pmHelpController.class \
		pmHelpDetailPanel.class \
		pmHelpIndexPanel.class \
		pmHelpItem.class \
		pmHelpRepository.class \
		pmHelpSearchPanel.class \
		BST.class \
		BSTItem.class \
		pmGuiException.class \
		pmHelpException.class \
		pmAddAccessFailedException.class \
		pmAddPrinterFailedException.class \
		pmIncompleteFormException.class \
		pmLoginFailedException.class \
		pmModifyPrinterFailedException.class \
		pmPrinterExistsException.class \
		pmDeleteFailedException.class \
		pmMustBeRemoteServerException.class \
		pmUserCancelledException.class \
		pmNullSelectedPrinterException.class \
		pmFindFrame.class \
		pmAboutBox.class \
		pmFrame.class \
		pmButton.class \
		pmTextField.class \
	        pmAuthOptions.class \
		pmOther.class

JAVAFILES =	$(CLASSFILES:.class=.java)

MSGDIRS =	$(ROOT)/usr/share/lib/locale \
		$(ROOT)/usr/share/lib/locale/com \
		$(ROOT)/usr/share/lib/locale/com/sun \
		$(ROOT)/usr/share/lib/locale/com/sun/admin \
		$(ROOT)/usr/share/lib/locale/com/sun/admin/pm \
		$(ROOT)/usr/share/lib/locale/com/sun/admin/pm/client

MSGDIR =	$(ROOT)/usr/share/lib/locale/com/sun/admin/pm/client
MSGJAVAFILES =	pmResources.java pmHelpResources.java
MSGFILES =	$(MSGJAVAFILES:%=$(MSGDIR)/%)

$(MSGFILES):=	OWNER = root
$(MSGFILES):=	GROUP = lp
$(MSGFILES):=	FILEMODE = 644

CLEANFILES=	*.class pmHelpResources.java
CLOBBERFILES=

#
# raw-text help files
#
HELPFILES= ./raw-help/*.rawhlp

#
# text file containing comments to be bound into the help resource bundle
#
HELP_COMMENTS=./help-l10n-comments.txt

install all: $(CLASSFILES) help

#
# pmHelpResources.java is generated by parsing raw help text
#
pmHelpResources.java:	$(HELP_COMMENTS) \
			$$(HELPFILES) \
			helptools/parseMain.class \
			helptools/parsehelp
	$(RM) pmHelpResources.*
	cd helptools; make all
	helptools/parsehelp -C $(HELP_COMMENTS) -D $(CLASSPATH) \
		-J $(JAVA_ROOT) $(HELPFILES)

help: pmHelpResources.class

_msg:	$(MSGDIRS) help $(MSGFILES)

$(MSGDIR)/%: %
	$(INS.file)

$(MSGDIRS):
	$(INS.dir)

jstyle:
	jstyle $(JAVAFILES)

lint:
clean:
	$(RM) $(CLEANFILES)
	cd helptools; make clean
clobber: clean
